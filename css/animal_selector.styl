.animal-selector {
  background: $white;
  box-sizing: border-box;
  color: $black;
  float: right;
  padding: 10px;
  position: relative;
  -webkit-tap-highlight-color: transparent;
  transition: opacity 0.5s ease-in-out;
  width: 405px;

  .general-filters {
    border-radius: 3px;
    box-sizing: border-box;
    height: 40px;
    position: relative;
    text-align: left;

    .filter-menu {
      font-size: 14px;
      line-height: 30px;
      position: absolute;
      z-index: 1;

      button[name="characteristic"] {
        position: relative;

        &:hover {
          box-shadow: 0 0 0 1px rgba($white, 0.5) inset;
        }

        // TODO: Delete this? It is causing weird fragmenting
        // &:after {
        //   border: 4px solid transparent;
        //   border-top-color: $white;
        //   content: "";
        //   height: 0;
        //   margin-top: -2px;
        //   position: absolute;
        //   right: 5px;
        //   top: 50%;
        //   width: 0;
        // }
      }

      .menu {
        box-shadow: 0 2px 3px $black;
        color: $green-dark;
        font-size: 12px;
        overflow: hidden;
        padding-top: 2px;
        right: 0;
        text-align: center;
        top: 100%;
        white-space: nowrap;

        button {
          border-top: 1px solid $gray;
          box-sizing: border-box;
          display: block;
          min-width: 100%;
          padding: 0 10px;
          background: $white;

          &:hover,
          &.selected {
            background: $blue;
            color: $white;
          }

          img {
            display: none;
          }
        }

        &.hidden {
          display: none;
        }
      }

      &.open {
        button[name="characteristic"] {
          background: $white;
          border-bottom: 1px solid $gray;
          color: $green-dark;
          text-shadow: none;
        }
      }
    }

    .search {
      $search-height = 30
      display: inline-block;
      float: right;
      margin: 5px 5px 0 0;
      position: relative;

      i[rel="search"] {
        font-size: 16px;
        left: 7px;
        position: absolute;
        top: 4px;
        color: #ddd;
        z-index: 1;
      }

      input[name="search"] {
        appearance: none;
        border: 2px solid #ddd;
        border-radius: 5px;
        box-sizing: border-box;
        color: $dark-grey-font;
        font-family: inherit;
        font-size: 12px;
        height: unit($search-height, 'px');
        padding: 0 10px 0 25px;
        margin-top: unit(-($search-height / 2), 'px');;
        width: 160px;
        outline: none;
      }
    }
  }

  .characteristic-filters {
    clearfix();
    padding: 5px 0;
    margin-bottom: 5px;
    position: relative;

    .filter-menu {
      box-sizing: border-box;
      float: left;
      margin-left: 7px;
      width: 80px;

      [data-language="pl_pl"] &,
      [data-language="fi_fi"] & {
        font-size: 13px;
        letter-spacing: -1px;
      }

      &:first-child {
        margin-left: 0;
      }

      button[name="characteristic"] {
        @extend #standard-button;
        @extend .light-grey-btn;
        float: left;
        font-size: 12px;
        height: 30px;
        overflow: hidden;
        padding: 0;
        position: relative;
        text-overflow: ellipsis;
        white-space: nowrap;
        width: 100%;
      }

      .menu {
        border: 1px solid $black;
        bottom: 100%;
        box-sizing: border-box;
        font-size: 12px;
        height: 50px;
        left: 0;
        opacity: 1;
        position: absolute;
        width: 100%;
        z-index: 1;

        &.hidden {
          display: none;
        }

        button[name="characteristic-value"] {
          /*background: url("images/characteristics-values.png");*/
          float: left;
          height: 40px;
          margin: 4px 0 0 5px;
          position: relative;
          width: 40px;

          &.selected {
            border: 1px solid $gold;
            margin: 3px 0 0 4px;
          }
         
          &[value="coatTanYellow"]           {background: url(images/characteristics-values/coatTanYellow.png)}
          &[value="coatRedBrown"]            {background: url(images/characteristics-values/coatRedBrown.png)}
          &[value="coatBrownBlack"]          {background: url(images/characteristics-values/coatBrownBlack.png)}
          &[value="coatGray"]                {background: url(images/characteristics-values/coatGray.png)}
          &[value="coatGrayBlack"]           {background: url(images/characteristics-values/coatGrayBlack.png)}
          &[value="coatBlack"]               {background: url(images/characteristics-values/coatBlack.png)}
          &[value="coatOther"]               {background: url(images/characteristics-values/coatOther.png)}
          &[value="coatMottled"]             {background: url(images/characteristics-values/coatMottled.png)}
          &[value="coatSolid"]               {background: url(images/characteristics-values/coatSolid.png)}
          &[value="coatOrTailStriped"]       {background: url(images/characteristics-values/coatCoatOrTailStriped.png)}

         
          /* TODO eliminate these two single choice filter */
          &[value="hornsNone"]               {background: url(images/characteristics-values/hornNone.png)}
          &[value="manMade"]           {background: url(images/characteristics-values/manManMade.png)}
        
          &[value="tailBushy"]               {background: url(images/characteristics-values/tailBushy.png)}
          &[value="tailSmooth"]              {background: url(images/characteristics-values/tailSmooth.png)}
          &[value="tailFlat"]                {background: url(images/characteristics-values/tailFlat.png)}
          &[value="tailLong"]                {background: url(images/characteristics-values/tailLong.png)}

          &[value="buildStocky"]             {background: url(images/characteristics-values/buildStocky.png)}
          &[value="buildTall"]               {background: url(images/characteristics-values/buildTall.png)}
          &[value="buildLanky"]              {background: url(images/characteristics-values/buildLanky.png)}
          &[value="buildSmall"]              {background: url(images/characteristics-values/buildSmall.png)}
          &[value="buildLowSlung"]           {background: url(images/characteristics-values/buildLowSlung.png)}




          .label {
            bottom: 100%;
            border-radius: 3px;
            box-shadow: 0 1px 2px $black;
            color: $black;
            display: none;
            font-size: 10px;
            font-weight: bold;
            left: 50%;
            margin: 0 0 3px -10px;
            padding: 2px 10px;
            position: absolute;
            white-space: nowrap;
            z-index: 1;

            &:after {
              border: 5px solid transparent;
              border-top-color: $gold;
              content: "";
              left: 5px;
              position: absolute;
              top: 100%;
            }
          }

          &:hover .label {
            display: block;
          }
        }

        button[name="clear-characteristic"] {
          @extend #standard-button;
          float: right;
          margin: 11px 7px 0 0;
          text-align: center;
        }
      }

      &.open button[name="characteristic"] {
       
        &:after {
          border: 6px solid transparent;
          border-bottom-color: lighten($green, 0.33);
          bottom: 100%;
          content: "";
          height: 0;
          margin: 0 0 -1px -6px;
          position: absolute;
          left: 50%;
          width: 0;
        }
      }

      &.in-use button[name="characteristic"] {
      }
    }
  }

  .selection-area {
    border-radius: 3px;

    .items {
      clearfix();
      height: 345px;
      margin: 0 -1px;
      position: relative;

      [data-animal] {
        // border: 1px solid $green-dark;
        color: $dark-grey-font;
        box-sizing: border-box;
        cursor: pointer;
        float: left;
        font-size: 14px;
        opacity: 1;
        transition: opacity 0.25s ease-in-out;

        [data-language="pl_pl"] & {
          font-size: 11px;
          letter-spacing: -1px;
        }

        [data-language="fi_fi"] & {
          font-size: 10px;
          letter-spacing: -1px
        }

        &:focus {
          outline: none;
        }

        &.dimmed {
          opacity: 0.33;
        }

        &.hidden {
          display: none;
        }

        &:hover {
          span {
            background: $medium-blue;
            color: #fff;
          }
        }

        span {
          padding: 5px 5px 5px 10px;
          margin-left: -10px;
          border-radius: 14px;
        }
        
      }

      // NOTE: I totally hate this.

      [data-animal="american-coot"] .image {
        @extend #thumb-for.american-coot;
      }

      [data-animal="beaver"] .image {
        @extend #thumb-for.beaver;
      }

      [data-animal="bike"] .image {
        @extend #thumb-for.bike;
      }

      [data-animal="bird-cannot-id"] .image {
        @extend #thumb-for.bird-cannot-id;
      }

      [data-animal="canada-goose"] .image {
        @extend #thumb-for.canada-goose;
      }

      [data-animal="car"] .image {
        @extend #thumb-for.car;
      }

      [data-animal="cardinal"] .image {
        @extend #thumb-for.cardinal;
      }

      [data-animal="chickadee"] .image {
        @extend #thumb-for.chickadee;
      }

      [data-animal="chipmunk"] .image {
        @extend #thumb-for.chipmunk;
      }

      [data-animal="coyote"] .image {
        @extend #thumb-for.coyote;
      }

      [data-animal="crow"] .image {
        @extend #thumb-for.crow;
      }

      [data-animal="deer"] .image {
        @extend #thumb-for.deer;
      }

      [data-animal="dom-cat"] .image {
        @extend #thumb-for.dom-cat;
      }

      [data-animal="dom-dog"] .image {
        @extend #thumb-for.dom-dog;
      }

      [data-animal="empty"] .image {
        @extend #thumb-for.empty;
      }

      [data-animal="flying-squirrel"] .image {
        @extend #thumb-for.flying-squirrel;
      }

      [data-animal="fox-squirrel"] .image {
        @extend #thumb-for.fox-squirrel;
      }

      [data-animal="grackle"] .image {
        @extend #thumb-for.grackle;
      }

      [data-animal="gray-fox"] .image {
        @extend #thumb-for.gray-fox;
      }

      [data-animal="gray-squirrel"] .image {
        @extend #thumb-for.gray-squirrel;
      }

      [data-animal="great-blue-heron"] .image {
        @extend #thumb-for.great-blue-heron;
      }

      [data-animal="horse"] .image {
        @extend #thumb-for.horse;
      }

      [data-animal="house-sparrow"] .image {
        @extend #thumb-for.house-sparrow;
      }

      [data-animal="human"] .image {
        @extend #thumb-for.human;
      }

      [data-animal="livestock"] .image {
        @extend #thumb-for.livestock;
      }

      [data-animal="mallard"] .image {
        @extend #thumb-for.mallard;
      }

      [data-animal="mink"] .image {
        @extend #thumb-for.mink;
      }

      [data-animal="mourning-dove"] .image {
        @extend #thumb-for.mourning-dove;
      }

      [data-animal="mouse"] .image {
        @extend #thumb-for.mouse;
      }

      [data-animal="mower"] .image {
        @extend #thumb-for.mower;
      }

      [data-animal="muskrat"] .image {
        @extend #thumb-for.muskrat;
      }

      [data-animal="northern-flicker"] .image {
        @extend #thumb-for.northern-flicker;
      }

      [data-animal="opossum"] .image {
        @extend #thumb-for.opossum;
      }

      [data-animal="other-vehicle"] .image {
        @extend #thumb-for.other-vehicle;
      }

      [data-animal="pigeon"] .image {
        @extend #thumb-for.pigeon;
      }

      [data-animal="rabbit"] .image {
        @extend #thumb-for.rabbit;
      }

      [data-animal="raccoon"] .image {
        @extend #thumb-for.raccoon;
      }

      [data-animal="rat"] .image {
        @extend #thumb-for.rat;
      }

      [data-animal="red-fox"] .image {
        @extend #thumb-for.red-fox;
      }

      [data-animal="robin"] .image {
        @extend #thumb-for.robin;
      }

      [data-animal="skunk"] .image {
        @extend #thumb-for.skunk;
      }

      [data-animal="squirrel-cannot-id"] .image {
        @extend #thumb-for.squirrel-cannot-id;
      }

      [data-animal="starling"] .image {
        @extend #thumb-for.starling;
      }

      [data-animal="unknown"] .image {
        @extend #thumb-for.unknown;
      }

      [data-animal="wood-duck"] .image {
        @extend #thumb-for.wood-duck;
      }

      [data-animal="wood-chuck"] .image {
        @extend #thumb-for.wood-chuck;
      }

      [data-animal="melanistic-gray-squirrel"] .image {
        @extend #thumb-for.melanistic-gray-squirrel;
      }

      &[data-items="lots"] [data-animal] {
        font-size: 12px;
        height: 6.25%;
        padding: 1px 0 0 3px;
        width: 33.33%;

        .image {
          display: none;
        }

        [data-language="fi_fi"] & {
          font-size: 10px;
        }
      }

      &[data-items="20"] [data-animal] {
        height: 10%;
        padding-top: 7px;
        text-align: center;
        width: 50%;

        .image {
          display: none;
        }
      }

      &[data-items="10"] [data-animal],
      &[data-items="5"] [data-animal] {
        clearfix();
        height: 20%;
        width: 50%;

        .image {
          float: left;
          height: 68px;
          overflow: hidden;
          width: 68px;
        }

        .label {
          float: left;
          margin: 10px 0 0 10px;
        }
      }

      &[data-items="10"] [data-animal] .label {
        max-width: 110px;
      }

      &[data-items="5"] [data-animal] {
        width: 100%;

        .label {
          margin-top: 25px;
        }
      }

      .none {
        display: none;
        font-size: 12px;
        margin-top: 125px;
        text-align: center;

        button[name="clear-filters"] {
          text-decoration: underline;
        }
      }

      &[data-items="0"] .none {
        display: block;
      }
    }
  }

  .aux {
    color: $black;
    font-size: 11px;
    left: 0;
    margin: 10px 0;
    position: absolute;
    text-align: right;
    top: 100%;
    width: 100%;

    button {
      font-weight: bold;
      margin: 0 10px;
      text-align: right;
      text-shadow: 0 1px 0 rgba($white, 0.25);
      width: 70px;
    }
  }

  .finished + & {
    opacity: 0.75;
    pointer-events: none;
  }
}
